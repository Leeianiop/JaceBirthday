<!DOCTYPE html>
<html>
<head>
  <title>Birthday Game</title>
  <style>
    canvas { display: block; margin: auto; background: #f0f0f0; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = { x: 100, y: 500, w: 60, h: 80, dx: 0, dy: 0, speed: 4, onGround: false, facingRight: true, frame: 0 };
let gravity = 0.5;
let jumpPower = -10;

// Load player images (replace with your real sprites)
let rightFrames = [new Image(), new Image()];
rightFrames[0].src = "right 1.png";
rightFrames[1].src = "right 2.png";
let leftFrames = [new Image(), new Image()];
leftFrames[0].src = "left 1.png";
leftFrames[1].src = "left 2.png";

// Platforms
let platforms = [{x:0, y:580, w:800, h:20}];
let stairs = [];

// Text toggle
let textToggle = false;

// Time bar function
function getProgress() {
  let now = new Date();
  let next = new Date(now.getFullYear(), 7, 13); // Aug=7 (0-indexed)
  if (now > next) next.setFullYear(now.getFullYear()+1);
  let total = (next - new Date(next.getFullYear()-1,7,13));
  let left = (next - now);
  return 1 - left/total;
}

function update() {
  // Movement
  player.x += player.dx;
  player.dy += gravity;
  player.y += player.dy;

  // Ground/platform collision
  player.onGround = false;
  for (let plat of platforms.concat(stairs)) {
    if (player.x < plat.x+plat.w && player.x+player.w > plat.x &&
        player.y < plat.y+plat.h && player.y+player.h > plat.y) {
      if (player.dy > 0) {
        player.y = plat.y - player.h;
        player.dy = 0;
        player.onGround = true;
      }
    }
  }

  // Animate
  if (player.dx !== 0) {
    player.frame = (player.frame + 0.15) % 2;
  } else {
    player.frame = 0;
  }

  // Collision with text area
  if (player.y < 60 && player.x > 250 && player.x < 550) {
    textToggle = !textToggle;
    // Add a stair block each touch
    stairs.push({x:100+stairs.length*60, y:540-stairs.length*40, w:60, h:20});
  }
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Draw platforms
  ctx.fillStyle = "#444";
  for (let plat of platforms.concat(stairs)) {
    ctx.fillRect(plat.x, plat.y, plat.w, plat.h);
  }

  // Progress bar
  let progress = getProgress();
  ctx.strokeStyle = "black";
  ctx.






