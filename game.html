<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Birthday Game</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<style>
  body { 
    background: #ffeedd; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    font-family: 'Pacifico', cursive; 
    margin: 0;
  }
  #birthdayText {
    font-size: 28px; 
    cursor: pointer; 
    margin-top: 20px;
  }
  #countdown {
    font-size: 22px; 
    margin-top: 10px;
  }
  canvas {
    background: #ffffff; 
    margin-top: 20px; 
    border-radius: 20px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<div id="birthdayText">Happy 46th Birthday Daddy</div>
<div id="countdown"></div>
<canvas id="gameCanvas" width="1200" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// --- Text click cycle ---
const texts = ["Happy 46th Birthday Daddy","Happy 46th Birthday Jace","Happy 46th Birthday Lee","Hapi Bday Mah N-"];
let textIndex = 0;
document.getElementById('birthdayText').addEventListener('click', () => {
    textIndex = (textIndex + 1) % texts.length;
    document.getElementById('birthdayText').innerText = texts[textIndex];
});

// --- Countdown ---
function getNextCountdown() {
    const now = new Date();
    let target = new Date(now.getFullYear(), 7, 13); // August 13
    if(now > target) target.setFullYear(now.getFullYear() +1);
    return target;
}
let targetDate = getNextCountdown();

// --- Key handling ---
const keys = {};
document.addEventListener('keydown', e => keys[e.key.toLowerCase()]=true);
document.addEventListener('keyup', e => keys[e.key.toLowerCase()]=false);

// --- Game objects ---
let player = { x:400, y:400, width:200, height:250, dir:"right", frame:0, frameTick:0, jumping:false, vy:0 };
let cake = { x:800, y:430, width:200, height:250, frame:0 };
const playerSpeed = 10;

let gameRunning = true;
let eatCount = 0;
let showSpecial = false;
let showCharacter = false;
let interactionText = "";
let riding = false;
let planeActive = false;

// --- Button ---
let buttonX = 20, buttonY=100, buttonW=80, buttonH=80;

// --- Images (replace with your own files) ---
const playerRightFrames = [new Image(), new Image()];
playerRightFrames[0].src="right 1.png";
playerRightFrames[1].src="right 2.png";
const playerLeftFrames = [new Image(), new Image()];
playerLeftFrames[0].src="left 1.png";
playerLeftFrames[1].src="left 2.png";

const cakeFrames = [new Image(), new Image()];
cakeFrames[0].src="cake normal.png";
cakeFrames[1].src="cake eaten.png";

const buttonImage = new Image(); buttonImage.src="button.png";
const characterImage = new Image(); characterImage.src="mom.png";
const planeImage = new Image(); planeImage.src="plane.png";
const backgroundImage = new Image(); backgroundImage.src="paris.png";
const specialImage = new Image(); specialImage.src="pixil-frame-0(1).png";

let imagesToLoad = 6;
[playerRightFrames[0],playerRightFrames[1],playerLeftFrames[0],playerLeftFrames[1],cakeFrames[0],cakeFrames[1]].forEach(img=>{
    img.onload = ()=>{ imagesToLoad--; }
});

// --- Helpers ---
function drawPlayer(){
    const pf = player.dir==="right"?playerRightFrames[player.frame]:playerLeftFrames[player.frame];
    if(pf.complete) ctx.drawImage(pf, player.x, player.y, player.width, player.height);
    else { ctx.fillStyle="red"; ctx.fillRect(player.x,player.y,player.width,player.height);}
}

function drawCake(){
    const cf = cakeFrames[cake.frame];
    if(cf.complete) ctx.drawImage(cf,cake.x,cake.y,cake.width,cake.height);
    else { ctx.fillStyle="pink"; ctx.fillRect(cake.x,cake.y,cake.width,cake.height);}
    ctx.fillStyle="black";
    ctx.font="24px Pacifico";
    ctx.fillText("Infinitely generative cake", cake.x+20, cake.y-20);
    ctx.fillText("(Press A to eat)", cake.x+20, cake.y+15);
}

function drawFireworks(){
    for(let i=0;i<20;i++){
        ctx.fillStyle=`hsl(${Math.random()*360},100%,50%)`;
        let x=Math.random()*canvas.width;
        let y=Math.random()*canvas.height;
        ctx.beginPath();
        ctx.arc(x,y,2+Math.random()*4,0,Math.PI*2);
        ctx.fill();
    }
}

// Draw rounded button
function drawButton(){
    ctx.save();
    ctx.beginPath();
    let r = 15;
    ctx.moveTo(buttonX+r, buttonY);
    ctx.lineTo(buttonX+buttonW-r, buttonY);
    ctx.quadraticCurveTo(buttonX+buttonW, buttonY, buttonX+buttonW, buttonY+r);
    ctx.lineTo(buttonX+buttonW, buttonY+buttonH-r);
    ctx.quadraticCurveTo(buttonX+buttonW, buttonY+buttonH, buttonX+buttonW-r, buttonY+buttonH);
    ctx.lineTo(buttonX+r, buttonY+buttonH);
    ctx.quadraticCurveTo(buttonX, buttonY+buttonH, buttonX, buttonY+buttonH-r);
    ctx.lineTo(buttonX, buttonY+r);
    ctx.quadraticCurveTo(buttonX, buttonY, buttonX+r, buttonY);
    ctx.closePath();
    ctx.clip();
    if(buttonImage.complete) ctx.drawImage(buttonImage, buttonX, buttonY, buttonW, buttonH);
    else { ctx.fillStyle="lightblue"; ctx.fillRect(buttonX,buttonY,buttonW,buttonH);}
    ctx.restore();
    ctx.strokeStyle="black"; ctx.lineWidth=2; ctx.stroke();
}

// --- Canvas button click ---
canvas.addEventListener("click", e=>{
    let rect = canvas.getBoundingClientRect();
    let mx = e.clientX - rect.left;
    let my = e.clientY - rect.top;
    if(mx>buttonX && mx<buttonX+buttonW && my>buttonY && my<buttonY+buttonH){
        showCharacter = true;
        planeActive = true;
        interactionText = "Press B to ride";
    }
});

// --- Key actions ---
document.addEventListener("keydown", e=>{
    if(e.key.toLowerCase()==="a" && gameRunning){
        eatCount++;
        cake.frame=1;
        if(eatCount>=15){ 
            showSpecial=true; 
            gameRunning=false; 
        }
    }
    if(showCharacter && e.code==="KeyB"){ riding=true; }
});

// --- Game loop ---
function gameLoop(){
    if(imagesToLoad>0){ requestAnimationFrame(gameLoop); return; }

    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw background
    if(backgroundImage.complete) ctx.drawImage(backgroundImage,0,0,canvas.width,canvas.height);

    // Countdown
    const now = new Date();
    if(now>=targetDate) targetDate=getNextCountdown();
    let diff = targetDate-now;
    const days = Math.floor(diff/(1000*60*60*24));
    const hours = Math.floor((diff/(1000*60*60))%24);
    const minutes = Math.floor((diff/(1000*60))%60);
    const seconds = Math.floor((diff/1000)%60);
    document.getElementById('countdown').innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;

    // --- Countdown bar ---
    ctx.fillStyle="black";
    ctx.fillRect(200,50,800,30); // outer black frame
    ctx.fillStyle="white";
    ctx.fillRect(202,52,796,26); // inner white frame

    if(planeActive){
        const totalTime = targetDate - new Date(targetDate.getFullYear(),0,1); 
        const elapsed = now - new Date(now.getFullYear(),0,1);
        const percent = Math.min(elapsed/totalTime,1);
        ctx.fillStyle="#ff6666";
        ctx.fillRect(202,52,796*percent,26); // fill red when plane active
    }

    // Player movement
    if(gameRunning){
        if(keys['arrowleft']){ player.x-=playerSpeed; player.dir="left"; player.frameTick++; }
        else if(keys['arrowright']){ player.x+=playerSpeed; player.dir="right"; player.frameTick++; }
        else { player.frame=0; player.frameTick=0; }
        if(player.frameTick>10){ player.frame=(player.frame+1)%2; player.frameTick=0; }

        // Jump & gravity
        if(keys['arrowup'] && !player.jumping){ player.jumping=true; player.vy=-15; }
        if(player.jumping){ player.y+=player.vy; player.vy+=1; if(player.y>=400){ player.y=400; player.jumping=false; player.vy=0; } }
    }

    // Riding mode
    if(riding){ drawFireworks(); }

    // Draw game objects
    drawCake();
    drawPlayer();
    drawButton();

    // Character mode
    if(showCharacter && planeActive){
        if(planeImage.complete) ctx.drawImage(planeImage,300,250,100,100);
        ctx.fillStyle="black"; ctx.font="20px Pacifico";
        ctx.fillText(interactionText,200,180);
    }

    // Special mode
    if(showSpecial && specialImage.complete){
        ctx.drawImage(specialImage,100,-130,1000,1000);
    }

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>





