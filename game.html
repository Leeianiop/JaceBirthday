<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Birthday Countdown Game</title>
<style>
  body { background: #ffeedd; display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
  canvas { background: #ffffff; margin-top: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
  h1 { cursor: pointer; user-select: none; color: #000000; text-shadow: 2px 2px 5px #aaa; }
  h2 { margin: 5px; color: #333; text-shadow: 1px 1px 2px #ccc; }
</style>
</head>
<body>

<h1 id="birthdayText">Happy Birthday Daddy</h1>
<h2 id="countdown"></h2>
  <h3 >until next BirthdayðŸŽ‰ðŸŽ‰</h3>
<canvas id="gameCanvas" width="1200" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// --- Text click cycle ---
const texts = ["Happy 46th Birthday Daddy","Happy 46th Birthday Jace","Happy 46th Birthday Lee"];
let textIndex = 0;
document.getElementById('birthdayText').addEventListener('click', () => {
    textIndex = (textIndex + 1) % texts.length;
    document.getElementById('birthdayText').innerText = texts[textIndex];
});

// --- Countdown setup ---
function getNextCountdown() {
    const now = new Date();
    let target = new Date(now.getFullYear(), 7, 13);
    if (now > target) target.setFullYear(now.getFullYear() + 1);
    return target;
}
let targetDate = getNextCountdown();

// --- Key handling ---
const keys = {};
document.addEventListener('keydown', (e) => keys[e.key.toLowerCase()] = true);
document.addEventListener('keyup', (e) => keys[e.key.toLowerCase()] = false);

// --- Sprite loader ---
const playerRightFrames = [new Image(), new Image()];
playerRightFrames[0].src = 'right 1.png';
playerRightFrames[1].src = 'right 2.png';
const playerLeftFrames = [new Image(), new Image()];
playerLeftFrames[0].src = 'left 1.png';
playerLeftFrames[1].src = 'left 2.png';

const cakeFrames = [new Image(), new Image()];
cakeFrames[0].src = 'cake normal.png';
cakeFrames[1].src = 'cake eaten.png';

let imagesToLoad = 6;
[playerRightFrames[0], playerRightFrames[1], playerLeftFrames[0], playerLeftFrames[1], cakeFrames[0], cakeFrames[1]].forEach(img=>{
    img.onload = ()=>{ imagesToLoad--; }
});

// --- Game objects ---
let player = {
    x: 400, y: 400,
    width: 200, height: 250,
    dir: "right", frame: 0,
    jumping: false, jumpTime: 0,
    frameTick: 0 // <--- counter
};
let cake = { x: 800, y: 400, width: 200, height: 250, frame: 0 };

const playerSpeed = 10;
const maxFlyTime = 30; // ~0.5s at 60fps

// --- Rounded rectangle helper ---
function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
    ctx.beginPath();
    ctx.moveTo(x+radius, y);
    ctx.lineTo(x+width-radius, y);
    ctx.quadraticCurveTo(x+width, y, x+width, y+radius);
    ctx.lineTo(x+width, y+height-radius);
    ctx.quadraticCurveTo(x+width, y+height, x+width-radius, y+height);
    ctx.lineTo(x+radius, y+height);
    ctx.quadraticCurveTo(x, y+height, x, y+height-radius);
    ctx.lineTo(x, y+radius);
    ctx.quadraticCurveTo(x, y, x+radius, y);
    ctx.closePath();
    if(fill) ctx.fill();
    if(stroke) ctx.stroke();
}

// --- Game loop ---
function gameLoop() {
    if(imagesToLoad > 0){ requestAnimationFrame(gameLoop); return; }

    ctx.clearRect(0,0,canvas.width,canvas.height);
 

    // Countdown
    const now = new Date();
    if(now >= targetDate) targetDate = getNextCountdown();
    let diff = targetDate - now;
    const days = Math.floor(diff / (1000*60*60*24));
    const hours = Math.floor((diff / (1000*60*60)) % 24);
    const minutes = Math.floor((diff / (1000*60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    document.getElementById('countdown').innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;

    // Countdown bar
    const barX=100, barY=100, barWidth=1000, barHeight=40, radius=20;
    ctx.fillStyle = "#ddd";
    roundRect(ctx, barX, barY, barWidth, barHeight, radius, true, false);

    let totalSeconds = (targetDate - now)/1000;
    let startCountdown = getNextCountdown();
    let progress = totalSeconds / ((targetDate - startCountdown)/1000);
    ctx.fillStyle = "#76c7c0";
    roundRect(ctx, barX, barY, barWidth*Math.max(0,progress), barHeight, radius, true, false);

    // Player movement
  if(keys['arrowleft']) {
    player.x -= playerSpeed;
    player.dir = "left";
    player.frameTick++;
    if (player.frameTick > 10) { // higher = slower
        player.frame = (player.frame + 1) % 2;
        player.frameTick = 0;
    }
} else if(keys['arrowright']) {
    player.x += playerSpeed;
    player.dir = "right";
    player.frameTick++;
    if (player.frameTick > 10) { 
        player.frame = (player.frame + 1) % 2;
        player.frameTick = 0;
    }
} else {
    player.frame = 0;
    player.frameTick = 0;
}

    // Jump/fly
if(keys['arrowup'] && !player.jumping) {
    player.jumping = true;
    player.vy = -15; // initial jump velocity
}

if(player.jumping){
    player.y += player.vy;
    player.vy += 1; // gravity pulling down
    if(player.y >= 400) {
        player.y = 400;
        player.jumping = false;
        player.vy = 0;
    }
}

    // Cake interaction
    cake.frame = keys['a'] ? 1 : 0;

    // Draw player
    let pf = player.dir==="right"?playerRightFrames[player.frame]:playerLeftFrames[player.frame];
    ctx.drawImage(pf, player.x, player.y, player.width, player.height);

    // Draw cake
    ctx.drawImage(cakeFrames[cake.frame], cake.x, cake.y, cake.width, cake.height);
    ctx.fillStyle="black";
    ctx.font="24px Arial";
    ctx.fillText("Infintely generative cake (Press A to eat)", cake.x+20, cake.y-20);

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>







